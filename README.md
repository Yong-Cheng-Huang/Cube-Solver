# 魔術方塊掃描器與求解器

這是一個使用OpenCV和Kociemba的魔術方塊掃描與求解系統。

## 功能特色

- **六面掃描**: 按照URFDLB順序掃描魔術方塊的六個面
- **顏色識別**: 自動識別白、紅、橙、黃、綠、藍六種顏色
- **智能排序**: 自動將檢測到的9個方塊按3x3網格排序
- **Kociemba求解**: 使用Kociemba算法求解魔術方塊
- **即時顯示**: 實時顯示掃描狀態和檢測結果

## 安裝需求

```bash
pip install opencv-python numpy kociemba
```

## 使用方法

1. **啟動程式**:
   ```bash
   python test.py
   ```

2. **掃描流程**:
   - 按 `s` 開始掃描模式
   - 將魔術方塊的一面對準攝影機
   - 確保檢測到9個方塊（綠色框框標示）
   - 按 `n` 確認當前掃描並進入下一面
   - 重複直到完成6個面的掃描

3. **求解魔術方塊**:
   - 完成所有面掃描後，按 `solve` 開始求解
   - 系統會顯示Kociemba格式的解法

4. **退出程式**:
   - 按 `q` 退出程式

## 顏色對應

| 顏色 | Kociemba代碼 | 說明 |
|------|---------------|------|
| 白色 | U | Up (頂面) |
| 紅色 | R | Right (右面) |
| 藍色 | F | Front (前面) |
| 橙色 | L | Left (左面) |
| 綠色 | B | Back (後面) |
| 黃色 | D | Down (底面) |

## 掃描順序

程式按照以下順序掃描魔術方塊的六個面：
1. **U** (Up) - 頂面
2. **R** (Right) - 右面  
3. **F** (Front) - 前面
4. **D** (Down) - 底面
5. **L** (Left) - 左面
6. **B** (Back) - 後面

## 注意事項

- 確保光線充足，避免陰影影響顏色識別
- 魔術方塊應完整顯示在攝影機視野內
- 每個面需要檢測到完整的9個方塊才能進行下一步
- 如果顏色識別不準確，可以調整程式中的HSV閾值

## 技術細節

- **影像處理**: 使用OpenCV進行邊緣檢測和輪廓識別
- **顏色分類**: 基於HSV色彩空間進行顏色識別
- **方塊排序**: 使用網格算法將檢測到的方塊按3x3排列
- **求解算法**: 使用Kociemba的兩階段算法求解魔術方塊

## 故障排除

1. **無法檢測到方塊**: 檢查光線條件和魔術方塊是否完整顯示
2. **顏色識別錯誤**: 調整`classify_color`函數中的HSV閾值
3. **求解失敗**: 檢查掃描結果是否正確，確保所有54個方塊都被正確識別 